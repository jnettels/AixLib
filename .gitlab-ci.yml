test_overall_coverage:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:conda-integration
  stage: test
  services:
    -  docker

  before_script:
    - printenv
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=utf-8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py --coverage-only

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure

# test_dymola_Airflow:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=utf-8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.Airflow --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_BoundaryConditions:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.BoundaryConditions --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_Controls:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.Controls --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_Electrical:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.Electrical --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_FastHVAC:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.FastHVAC --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


test_dymola_Fluid_Actuators:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Actuators --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure
    
test_dymola_Fluid_BaseClasses:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.BaseClasses --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure   

test_dymola_Fluid_Chillers:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Chillers --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure   

test_dymola_Fluid_Delays:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Delays --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  
    
    
test_dymola_Fluid_Examples:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Examples --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  


test_dymola_Fluid_FixedResistances:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.FixedResistances --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  

test_dymola_Fluid_FMI:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.FMI --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  

test_dymola_Fluid_FMI:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.FMI --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  
    
test_dymola_Fluid_FMI:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.FMI --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure  

test_dymola_Fluid_Geothermal:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Geothermal --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      

test_dymola_Fluid_HeatExchangers:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.HeatExchangers --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      

test_dymola_Fluid_HeatPumps:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.HeatPumps --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      
    

test_dymola_Fluid_Humidifiers:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Humidifiers --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      



test_dymola_Fluid_Interfaces:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Interfaces --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      



test_dymola_Fluid_MassExchangers:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.MassExchangers --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      


test_dymola_Fluid_MixingVolumes:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.MixingVolumes --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      



test_dymola_Fluid_Movers:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Movers --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure      


test_dymola_Fluid_Sensors:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Sensors --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure     


test_dymola_Fluid_Solar:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Solar --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure     


test_dymola_Fluid_Sources:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Sources --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure     


test_dymola_Fluid_Storage:
  image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
  stage: test
  timeout: 8h 0m
  services:
    -  docker

  before_script:
    - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - source activate python27
    - python -V               # Print out python version for debugging
    - dir
    - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
    - export PYTHONIOENCODING=UTF8 # just in case

  script:
    - cd AixLib && python ../bin/runUnitTests.py -n 3 --batch --single-package AixLib.Fluid.Storage --tool dymola

  artifacts:
    when: on_failure
    paths:
      - AixLib/simulator-dymola.log

  retry:
    max: 2
    when: runner_system_failure     




# test_dymola_Media:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.Media --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_Systems:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker

#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.Systems --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure


# test_dymola_ThermalZones:
#   image: registry.git.rwth-aachen.de/ebc/ebc_intern/dymola-docker:aixlibCITesting2020-miniconda-aixlib
#   stage: test
#   services:
#     -  docker
#   before_script:
#     - Xvfb :77 -extension RANDR -extension GLX & export DISPLAY=:77.0 &&
#     - export PIP_CACHE_DIR="/opt/cache/pip"
#     - source activate python27
#     - python -V               # Print out python version for debugging
#     - dir
#     - pip install --upgrade git+https://github.com/MichaMans/BuildingsPy@testexamplescoverage
#     - export PYTHONIOENCODING=UTF8 # just in case

#   script:
#     - cd AixLib && python ../bin/runUnitTests.py -n 2 --batch --single-package AixLib.ThermalZones --tool dymola

#   artifacts:
#     when: on_failure
#     paths:
#       - AixLib/simulator-dymola.log

#   retry:
#     max: 2
#     when: runner_system_failure
